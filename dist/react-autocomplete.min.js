!function(e,t){"function"==typeof define&&define.amd?define(["react","jst9","classnames"],function(s,n,i){return e.AutoComplete=t(s,n,i)}):"object"==typeof exports?module.exports=t(require("react"),require("jst9"),require("classnames")):e.AutoComplete=t(e.React,e.jsT9,e.classNames)}(this,function(e,t,s){"use strict";var n={Enter:13,Escape:27,ArrowUp:38,ArrowRight:39,ArrowDown:40},i=e.createClass({displayName:"AutoComplete",getDefaultProps:function(){return{itemComponent:"div",itemProps:{},hideOnChoose:!0,fillOnChoose:!0,hideOnClickOutside:!0,debounce:!1,debounceTime:500,words:[],wordsSettings:{}}},getInitialState:function(){var e;e=t&&this.props.words instanceof t?this.props.words:new t(this.props.words,this.props.wordsSettings);var n=s("autocomplete-item",this.props.itemProps.className);return this.props.itemProps.className&&delete this.props.itemProps.className,{words:e,open:!1,currentWord:"",selectedItemIndex:-1,mouseOverList:!1,currentSuggestions:[],itemClass:n,itemProps:this.props.itemProps}},_getKey:function(e){return e.keyCode||e.charCode},_handleInput:function(t){{var s=e.findDOMNode(this.refs.input).value;this._getKey(t)}this.setState({currentWord:s,selectedItemIndex:-1}),s.length?this._updateSuggestions(s):this._handleEmptyInput()},_handleCommandInput:function(t){var s,i=this._getKey(t),o=this._isDirectionalKey(i),r=this.refs["item_"+this.state.selectedItemIndex];this.state.selectedItemIndex>-1&&(s=e.findDOMNode(r)),i===n.Escape?this._hideItems():i===n.Enter?this.state.selectedItemIndex>-1&&this._handleChoose(s.dataset.content):o&&this._changeSelectedItem(o)},_updateSuggestions:function(e){e=e||this.state.currentWord;var t=this.state.words.predict(e);this.setState({currentSuggestions:t,open:!!t.length})},_handleEmptyInput:function(){this.setState({currentSuggestions:[],open:!1})},_hideItems:function(){this.setState({open:!1,selectedItemIndex:-1})},_changeSelectedItem:function(e){this.state.mouseOverList||this.setState(function(t){var s=(t.selectedItemIndex+e)%t.currentSuggestions.length;return 0>s&&(s=t.currentSuggestions.length-1),{selectedItemIndex:s}})},_setSelectedItem:function(e){this.setState({selectedItemIndex:e})},_resetSelectedItem:function(){this.setState({selectedItemIndex:-1})},_setMouseOverList:function(e){this.setState({mouseOverList:e})},_handleChoose:function(e){var t={};this.props.fillOnChoose&&(t.currentWord=e),this.props.hideOnChoose&&(t.open=!1),this.setState(t)},_isDirectionalKey:function(e){return e===n.ArrowUp?-1:e===n.ArrowDown?1:0},render:function(){var t=s("autocomplete-list",{open:this.state.open}),n=this.state.selectedItemIndex,i=this.props.itemComponent,o=this.state.currentSuggestions.map(function(t,o){var r=s(this.state.itemClass,{hover:o===n});return e.createElement(i,e.__spread({className:r,onClick:this._handleChoose.bind(this,t),onMouseEnter:this._setSelectedItem.bind(this,o),onMouseLeave:this._resetSelectedItem,ref:"item_"+o,"data-content":t},this.state.itemProps),t)}.bind(this));return e.createElement("div",{className:"autocomplete"},e.createElement("input",{ref:"input",type:"text",className:"autocomplete-input",onKeyDown:this._handleCommandInput,onChange:this._handleInput,value:this.state.currentWord}),e.createElement("div",{className:t,onMouseEnter:this._setMouseOverList.bind(this,!0),onMouseLeave:this._setMouseOverList.bind(this,!1)},o))}});return i});